(function(e){function t(t){for(var i,a,c=t[0],s=t[1],d=t[2],l=0,h=[];l<c.length;l++)a=c[l],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&h.push(o[a][0]),o[a]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i]);u&&u(t);while(h.length)h.shift()();return n.push.apply(n,d||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],i=!0,c=1;c<r.length;c++){var s=r[c];0!==o[s]&&(i=!1)}i&&(n.splice(t--,1),e=a(a.s=r[0]))}return e}var i={},o={app:0},n=[];function a(t){if(i[t])return i[t].exports;var r=i[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=i,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(r,i,function(t){return e[t]}.bind(null,i));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/vue-webcam-recorder/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var u=s;n.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var i=r("85ec"),o=r.n(i);o.a},"08ee":function(e,t,r){"use strict";var i=r("b527"),o=r.n(i);o.a},"161c":function(e,t,r){e.exports=r.p+"img/record.dd0f186c.svg"},2886:function(e,t,r){},"56b4":function(e,t,r){e.exports=r.p+"img/stop.13cd48df.svg"},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var i=r("2b0e"),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r(e.currentPage,{tag:"component",on:{go:e.onGoToRecorderPage}})],1)},n=[],a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"start-page"},[r("h1",[e._v(" Webcam video recorder ")]),r("button",{staticClass:"button",on:{click:e.onGo}},[e._v("Let's go")])])},c=[],s={name:"Start-Page",methods:{onGo:function(){this.$emit("go")}}},d=s,u=(r("98ec"),r("2877")),l=Object(u["a"])(d,a,c,!1,null,"21ed6e47",null),h=l.exports,v=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"recorder-page"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.deviceId,expression:"deviceId"}],staticClass:"camera-selection",on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.deviceId=t.target.multiple?r:r[0]}}},[r("option",[e._v("--Select Device--")]),e._l(e.devices,(function(t){return r("option",{key:t.deviceId,domProps:{value:t.deviceId}},[e._v(e._s(t.label)+" ")])}))],2),r("app-media-recorder",{attrs:{videoStream:e.videoStream,audioStream:e.audioStream}})],1)},f=[],m=(r("4160"),r("fb6a"),r("a9e3"),r("159b"),r("96cf"),r("1da1")),p=r("4f96"),g=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"media-recorder"},[i("div",{staticClass:"video-cantainer",style:e.videoContainerStyles},[i("video",{ref:"video",staticClass:"video",attrs:{controls:e.showVideo,width:e.videoSizes[0],height:e.videoHeight[1],src:e.recordUrl}})]),i("div",{staticClass:"controls"},[i("div",{staticClass:"timer"},["nothing"===this.webcam?i("div",[e._v(" "+e._s(e.timerStr[0])+" ")]):e._e(),"start"===this.webcam?i("div",[e._v(" "+e._s(e.timerStr[1])+" "+e._s(e.timerCount)+" "+e._s(e.timerStr[3])+" ")]):e._e(),"stop"===this.webcam?i("div",[e._v(" "+e._s(e.timerStr[2])+" "+e._s(e.timerCount)+" "+e._s(e.timerStr[3])+" ")]):e._e()]),e.showStartRecordingButton?i("button",{staticClass:"button",attrs:{title:"Start recording"},on:{click:e.onStartPreview}},[i("img",{staticClass:"icon",attrs:{src:r("161c")}})]):i("button",{staticClass:"button",attrs:{title:"Stop"}},[i("img",{staticClass:"icon",attrs:{src:r("56b4")}})]),i("button",{staticClass:"button",attrs:{disabled:e.downloadButtonDisabled,title:"Download"},on:{click:e.onDownloadRecord}},[i("img",{staticClass:"icon",attrs:{src:r("f28e")}})])])])},b=[],S=(r("4de4"),r("0481"),r("d81d"),r("4069"),r("d3b7"),r("3ca3"),r("ddb0"),r("2b3d"),{RECORDING:"recording",INACTIVE:"inactive",PAUSED:"paused"}),w=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t.map((function(e){return e&&e.getTracks()})).filter((function(e){return!!e})).flat();return new MediaStream(i)},R={NOTHING:"nothing",STARTRECORD:"start",STOPRECORD:"stop"},C={name:"AppMediaRecorder",props:{videoStream:{type:[MediaStream,Boolean],default:!1},audioStream:{type:[MediaStream,Boolean],default:!1},videoWidth:{type:Number,default:1280},videoHeight:{type:Number,default:720}},data:function(){return{recordBlob:null,recordVideo:!0,recordAudio:!1,recorderState:S.INACTIVE,timerStr:["Please click the red button to start recording ","Recording starts in: ","Recording ends in: "," seconds"],timerCount:0,webcam:R.NOTHING}},computed:{toggleVideoTitle:function(){return this.recordVideo?"Disable video recording":"Enable video recording"},toggleAudioTitle:function(){return this.recordAudio?"Disable audio recording":"Enable audio recording"},videoSizes:function(){var e=window.innerWidth,t=window.innerHeight,r=e/t,i=Math.min(e,800),o=i/r;return i<1280&&(i=1280),o<720&&(o=720),[i,o]},videoContainerStyles:function(){return{"--video-width":"".concat(this.videoSizes[0],"px"),"--video-height":"".concat(this.videoSizes[1],"px")}},showVideo:function(){return""!==this.recordUrl},combinedStream:function(){return this.waitForAudioStream||this.waitForVideoStream?null:w.apply(void 0,[this.recordAudio&&this.audioStream,this.recordVideo&&this.videoStream])},waitForAudioStream:function(){return this.recordAudio&&!this.audioStream&&!1!==this.audioStream},waitForVideoStream:function(){return this.recordVideo&&!this.videoStream&&!1!==this.videoStream},recorder:function(){var e=this;if(!this.combinedStream)return null;var t=new MediaRecorder(this.combinedStream);return t.ondataavailable=function(t){return e.recordBlob=t.data},t},showStartRecordingButton:function(){return this.recorderState===S.INACTIVE},showPauseRecordingButton:function(){return this.recorderState===S.RECORDING},recordUrl:function(){return this.recordBlob?URL.createObjectURL(this.recordBlob):""},resumeButtonDisabled:function(){return this.recorderState!==S.PAUSED},downloadButtonDisabled:function(){return!this.recordBlob}},methods:{onToggleRecordAudio:function(){this.recordAudio=!this.recordAudio},onToggleRecordVideo:function(){this.recordVideo=!this.recordVideo},onStopRecording:function(){this.recorder.stop(),this.recorderState=this.recorder.state,this.$refs.video.srcObject&&(this.$refs.video.srcObject=null)},onStartPreview:function(){var e=this;this.webcam=R.STARTRECORD,this.recordBlob=null,this.timerCount=5,this.$nextTick((function(){e.$refs.video.srcObject=e.videoStream,e.$refs.video.play()}))},onStartRecording:function(){var e=this;this.timerCount=10,this.webcam=R.STOPRECORD,this.$nextTick((function(){e.recorder.start(),e.recorderState=e.recorder.state,e.recordVideo&&(e.$refs.video.srcObject=e.videoStream,e.$refs.video.play())}))},onTimerRecording:function(){this.webcam=R.NOTHING,this.recorder.stop(),this.recorderState=this.recorder.state,this.$refs.video.srcObject&&(this.$refs.video.srcObject=null)},onPauseRecording:function(){this.recorder.pause(),this.recorderState=this.recorder.state,this.recordVideo&&this.$refs.video.pause()},onResumeRecording:function(){this.recorder.resume(),this.recorderState=this.recorder.state,this.recordVideo&&this.$refs.video.play()},onDownloadRecord:function(){if(""!==this.recordUrl){var e=document.createElement("a");e.href=this.recordUrl,e.download="0000-".concat(Date.now(),".avi"),e.click()}},onTimerState:function(){this.webcam===R.STARTRECORD?this.onStartRecording():this.webcam===R.STOPRECORD&&this.onTimerRecording()},videoResolution:function(e){console.log(e)}},watch:{timerCount:{handler:function(e){var t=this;e>0?setTimeout((function(){t.timerCount--}),1e3):e<0&&(this.timerCount=0),0===this.timerCount&&this.onTimerState()},immediate:!0}}},O=C,y=(r("e393"),Object(u["a"])(O,g,b,!1,null,"6677a050",null)),_=y.exports,T={name:"RecorderPage",components:{AppMediaRecorder:_},props:{width:{type:[Number,String],default:"100%"},height:{type:[Number,String],default:500},selectFirstDevice:{type:Boolean,default:!1},resolution:{type:Object,default:null,validator:function(e){return e.height&&e.width}}},data:function(){return{audioStream:!1,videoStream:!1,deviceId:null,devices:[],cameras:[],camerasListEmitted:!1}},watch:{deviceId:function(e){this.updateWebcam(e)},devices:function(){var e=Object(p["a"])(this.devices),t=e[0];e.slice(1);t&&(this.deviceId=t.deviceId)}},methods:{testMediaAccess:function(){var e=this,t={video:!0};this.resolution&&(t.video={},t.video.height=this.resolution.height,t.video.width=this.resolution.width),navigator.mediaDevices.getUserMedia(t).then((function(t){var r=t.getTracks();r.forEach((function(e){e.stop()})),e.loadCameras()})).catch((function(t){return e.$emit("error",t)}))},loadCameras:function(){var e=this;navigator.mediaDevices.enumerateDevices().then((function(t){for(var r=0;r!==t.length;++r){var i=t[r];"videoinput"===i.kind&&e.devices.push(i)}})).then((function(){e.camerasListEmitted||(e.selectFirstDevice&&e.devices.length>0&&(e.deviceId=e.devices[0].deviceId),e.$emit("cameras",e.devices),e.camerasListEmitted=!0)})).catch((function(t){return e.$emit("Not supported",t)}))},getCameraStream:function(e){var t={audio:!1,video:{deviceId:e}};return this.resolution?(t.video.height=this.resolution.height,t.video.width=this.resolution.width):(t.video.height=720,t.video.width=1280),navigator.mediaDevices.getUserMedia(t).catch(console.error)},updateWebcam:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getCameraStream(t);case 2:this.videoStream=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),cameraCheck:function(){console.log(this.deviceId)}},mounted:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.testMediaAccess(),t.next=3,e.getCameraStream(e.deviceId);case 3:e.videoStream=t.sent;case 4:case"end":return t.stop()}}),t)})))()}},P=T,D=(r("08ee"),Object(u["a"])(P,v,f,!1,null,"8ac52c72",null)),A=D.exports,I={name:"App",components:{StartPage:h,RecorderPage:A},data:function(){return{currentPage:h}},methods:{onGoToRecorderPage:function(){this.currentPage=A}}},j=I,E=(r("034f"),Object(u["a"])(j,o,n,!1,null,null,null)),x=E.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(e){return e(x)}}).$mount("#app")},"85ec":function(e,t,r){},"8b43":function(e,t,r){},"98ec":function(e,t,r){"use strict";var i=r("2886"),o=r.n(i);o.a},b527:function(e,t,r){},e393:function(e,t,r){"use strict";var i=r("8b43"),o=r.n(i);o.a},f28e:function(e,t,r){e.exports=r.p+"img/download.e48ed1de.svg"}});
//# sourceMappingURL=app.a9971947.js.map